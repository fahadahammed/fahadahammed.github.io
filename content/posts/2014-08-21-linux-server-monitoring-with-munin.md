---
title: Linux Server Monitoring with Munin
author: Fahad Ahammed
type: post
date: 2014-08-21T16:51:27+00:00
url: /linux-server-monitoring-with-munin/
categories:
  - Technology
tags:
  - allow server to monitor by munin
  - easily setup munin
  - how to install and configure munin for monitoring remote servers
  - Monitor your vps by munin
  - setup munin to monitor remote server

---
This article is about showing how to monitor any server or remote server by a tool named **munin**. Munin the monitoring tool surveys all your computers and remembers what it saw. It presents all the information in graphs through a web interface. Its emphasis is on plug and play capabilities. I will show you how to set it up with a remote server too.

<!--more-->

Using Munin you can easily monitor the performance of your computers, networks, SANs, applications, weather measurements and whatever comes to mind. It makes it easy to determine &#8220;what&#8217;s different today&#8221; when a performance problem crops up. It makes it easy to see how you&#8217;re doing capacity-wise on any resources.

<p style="text-align: center;">
  <a href="https://i0.wp.com/fahadahammed.com/wp-content/uploads/2014/08/Linux_Server_Monitoring_with_Munin.png"><img loading="lazy" class="alignnone size-medium wp-image-2050" src="https://i0.wp.com/fahadahammed.com/wp-content/uploads/2014/08/Linux_Server_Monitoring_with_Munin-300x300.png?resize=300%2C300" alt="Linux_Server_Monitoring_with_Munin" width="300" height="300" srcset="https://i0.wp.com/fahadahammed.com/wp-content/uploads/2014/08/Linux_Server_Monitoring_with_Munin.png?resize=300%2C300&ssl=1 300w, https://i0.wp.com/fahadahammed.com/wp-content/uploads/2014/08/Linux_Server_Monitoring_with_Munin.png?resize=150%2C150&ssl=1 150w, https://i0.wp.com/fahadahammed.com/wp-content/uploads/2014/08/Linux_Server_Monitoring_with_Munin.png?w=610&ssl=1 610w" sizes="(max-width: 300px) 100vw, 300px" data-recalc-dims="1" /></a>
</p>

&nbsp;

Let&#8217;s start the procedure.

To install munin you need to make sure you have apache2 installed or apache server installed. I have used Debian Wheezy for monitoring server and Ubuntu-1404 LTS for remote server.

## Monitoring Server:

**Install:**

<pre>apt-get install munin munin-node munin-plugins-extra</pre>

**Enable Plugins:** Now you can enable some plugins which is perfect for your desire. Normally there are some enabled plugins in munin by default. But you can enable more or disable.

**Check enabled plugins:**

<pre>ls /etc/munin/plugins</pre>

Above command will give you the output of enabled munin plugins.

**Check available plugins to install:**

<pre>ls /usr/share/munin/plugins/</pre>

Above command will show you available plugins which you can enable.

To enable or disable first go to:

<pre>cd /etc/munin/plugins/</pre>

Then if you want to disable any plugin you can disable by deleting the file from that folder.

<pre>rm apache_accesses</pre>

To enable:

<pre>ln -s /usr/share/munin/plugins/apache_accesses</pre>

Every time you enable and disable you should restart both apache2 and Munin. (for both remote server and monitoring server)

<pre class="command">service apache2 restart</pre>

<pre class="command">service munin-node restart</pre>

<p class="command">
  Configuration Editing:
</p>

<pre class="command">nano /etc/munin/munin.conf</pre>

<p class="command">
  Now Change:
</p>

<pre class="command"># Example configuration file for Munin, generated by 'make build'

# The next three variables specifies where the location of the RRD
# databases, the HTML output, logs and the lock/pid files.  They all
# must be writable by the user running munin-cron.  They are all
# defaulted to the values you see here.
#
#dbdir   /var/lib/munin
#htmldir /var/cache/munin/www
#logdir /var/log/munin
#rundir  /var/run/munin

# Where to look for the HTML templates
#
#tmpldir /etc/munin/templates

# Where to look for the static www files
#
#staticdir /etc/munin/static

</pre>

<p class="command">
  To:
</p>

<pre class="command"># Example configuration file for Munin, generated by 'make build'

# The next three variables specifies where the location of the RRD
# databases, the HTML output, logs and the lock/pid files.  They all
# must be writable by the user running munin-cron.  They are all
# defaulted to the values you see here.
#
dbdir   /var/lib/munin
htmldir /var/cache/munin/www
logdir /var/log/munin
rundir  /var/run/munin

# Where to look for the HTML templates
#
tmpldir /etc/munin/templates

# Where to look for the static www files
#
#staticdir /etc/munin/static</pre>

<p class="command">
  Also you have to find:
</p>

<pre class="command"># a simple host tree
[localhost.localdomain]
address 127.0.0.1
use_node_name yes</pre>

<p class="command">
  And change it to: (change the server hostname by yours one.)
</p>

<pre class="command"># a simple host tree
[server1.domain.com]
address 127.0.0.1
use_node_name yes</pre>

<p class="command">
  You have to add remote server here too. Add below lines.
</p>

<pre class="command">[remote1.domain.com]
address <span style="color: #ff0000;">111.222.333.444</span>
use_node_name yes</pre>

<p class="command">
  Change above by your remote server information as IP,Hostname etc.
</p>

<p class="command">
  After adding it would look like below and you can add more like this:
</p>

<pre class="command"># a simple host tree
 [server1.domain.com]
 address 127.0.0.1
 use_node_name yes

[remote1.domain.com]
 address <span style="color: #ff0000;">111.222.333.444</span>
 use_node_name yes

[remote2.domain.com]
 address <span style="color: #ff0000;">111.222.333.444</span>
 use_node_name yes

[remote3.domain.com]
 address <span style="color: #ff0000;">111.222.333.444</span>
 use_node_name yes</pre>

<p class="command">
  <strong>Configuration of Apache Virtual host for Munin:</strong>
</p>

<pre class="command">nano <span class="system">/etc/munin/apache.conf</span></pre>

<p class="command">
  Find:
</p>

<pre class="command"># Enable this for template generation
Alias /munin /var/cache/munin/www

# Enable this for cgi-based templates
#Alias /munin-cgi/static /var/cache/munin/www/static
#ScriptAlias /munin-cgi /usr/lib/munin/cgi/munin-cgi-html
#&lt;Location /munin-cgi&gt;
#       Order allow,deny
#       Allow from localhost 127.0.0.0/8 ::1
#       AuthUserFile /etc/munin/munin-htpasswd
#       AuthName "Munin"
#       AuthType Basic
#       require valid-user
#&lt;/Location&gt;

&lt;Directory /var/cache/munin/www&gt;
        Order allow,deny
        Allow from localhost 127.0.0.0/8 ::1
        Options None

        # This file can be used as a .htaccess file, or a part of your apache
        # config file.
        #
        # For the .htaccess file option to work the munin www directory
        # (/var/cache/munin/www) must have "AllowOverride all" or something
        # close to that set.
        #

        #AuthUserFile /etc/munin/munin-htpasswd
        #AuthName "Munin"
        #AuthType Basic
        #require valid-user</pre>

<p class="command">
  Change it to:
</p>

<pre class="command"># Enable this for template generation
Alias /munin /var/cache/munin/www

# Enable this for cgi-based templates
#Alias /munin-cgi/static /var/cache/munin/www/static
#ScriptAlias /munin-cgi /usr/lib/munin/cgi/munin-cgi-html
#&lt;Location /munin-cgi&gt;
#       Order allow,deny
#       Allow from localhost 127.0.0.0/8 ::1
#       AuthUserFile /etc/munin/munin-htpasswd
#       AuthName "Munin"
#       AuthType Basic
#       require valid-user
#&lt;/Location&gt;

&lt;Directory /var/cache/munin/www&gt;
        Order allow,deny
<span style="color: #ff0000;">#</span>        Allow from localhost 127.0.0.0/8 ::1
        <span style="color: #ff0000;">Allow from all</span>
        Options None

        # This file can be used as a .htaccess file, or a part of your apache
        # config file.
        #
        # For the .htaccess file option to work the munin www directory
        # (/var/cache/munin/www) must have "AllowOverride all" or something
        # close to that set.
        #

<span style="color: #ff0000;">        AuthUserFile /etc/munin/munin-htpasswd</span>
<span style="color: #ff0000;">        AuthName "Munin"</span>
<span style="color: #ff0000;">        AuthType Basic</span>
<span style="color: #ff0000;">        require valid-user</span></pre>

<p class="command">
  From above you can see that i am saying you to enable password for entering or visiting munin pages. Also allow from all will allow all from outside the server including you.
</p>

<p class="command">
  Give password:
</p>

<pre class="command">htpasswd -c /etc/munin/munin-htpasswd <span style="color: #ff0000;">admin</span></pre>

<p class="command">
  Above will ask password for user <span style="color: #ff0000;">admin</span>. You can change that to your name.
</p>

## Remote Server: {.command}

You have to install these packages in all remote servers or the servers you want to be monitored by your monitor server:

<pre>sudo apt-get install munin-node munin-plugins-extra</pre>

Now you have to allow the monitor servers ip to get data to show.

Find:

<pre>allow ^127.0.0.1$
 allow ^::1$</pre>

And add remote server ip like this:

<pre>allow ^127.0.0.1$
 allow ^::1$
 <span style="color: #ff0000;">allow ^123.123.123.123$</span></pre>

You have to add your monitor server ip like above in every server you want to monitor.

Let you have monitor server 192.168.23.7 then you have to add that as allow ^192.168.23.7$ . You can also add plugins in remote servers. Your remote servers plugins will show them separately in munin.

## Finally:

Now restart both apache2 and munin in monitor server:

&nbsp;

<pre>service apache2 restart</pre>

<pre>service munin-node restart</pre>

In remote servers you have to restart munin node.

<pre>service munin-node restart</pre>

Now give that some time to generate logs and pages. After some time you can get desired output by accessing <span style="color: #ff0000;"><strong>http://remote-server-ip/munin/</strong></span> in a browser. It will ask for user and password. That&#8217;s it.

Leave feedback please.